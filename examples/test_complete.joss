class Main {
    Init main() {
        print("=== PRUEBA COMPLETA: Auth + GranMySQL ===")
        print("")
        
        $db = new GranMySQL()
        $auth = new Auth()
        
        print("Paso 1: Creando usuario (auto-crea js_users)...")
        string $email = "usuario@test.com"
        string $pass = "miPassword123"
        string $name = "Usuario Prueba"
        
        $auth.create([$email, $pass, $name])
        print("Usuario creado exitosamente")
        
        print("")
        print("Paso 2: Probando login exitoso...")
        $token = $auth.attempt($email, $pass)
        print("Token recibido:")
        print($token)
        
        print("")
        print("Paso 3: Probando login fallido...")
        $tokenFail = $auth.attempt($email, "passwordIncorrecto")
        print("Token con password incorrecto:")
        print($tokenFail)
        
        print("")
        print("Paso 4: Verificando datos con Builder...")
        $db.table("users")
        $db.where("email", $email)
        $resultado = $db.get()
        print("Datos del usuario:")
        print($resultado)
        
        print("")
        print("Paso 5: Insertando con Builder...")
        $db.table("users")
        $cols = ["name", "email", "password"]
        $vals = ["Builder User", "builder@test.com", "hash456"]
        $db.insert($cols, $vals)
        print("Usuario insertado via Builder")
        
        print("")
        print("Paso 6: Verificando inserci√≥n...")
        $db.table("users")
        $db.where("email", "builder@test.com")
        print($db.get())
        
        print("")
        print("=== PRUEBA COMPLETADA ===")
        print("Verifica en MySQL que existe la tabla: js_users")
    }
}
