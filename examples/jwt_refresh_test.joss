class Main {
    Init main() {
        print("=== TEST: JWT con Expiracion Configurable ===")
        print("")
        
        $auth = new Auth()
        
        print("Paso 1: Creando usuario...")
        string $email = "jwt_refresh@example.com"
        string $pass = "testPass123"
        $data = [$email, $pass, "JWT Refresh User"]
        $auth.create($data)
        
        print("")
        print("Paso 2: Login inicial (JWT 3 meses)...")
        $token = $auth.attempt($email, $pass)
        print("Token inicial:")
        print($token)
        
        print("")
        print("Paso 3: Refrescando token (JWT 6 meses)...")
        $newToken = $auth.refresh($token)
        print("Token refrescado:")
        print($newToken)
        
        print("")
        print("=== Configuracion ===")
        print("JWT_INITIAL_EXPIRY_MONTHS: 3 meses (default)")
        print("JWT_REFRESH_EXPIRY_MONTHS: 6 meses (default)")
        print("Configurable via env.joss")
        
        print("")
        print("=== TEST COMPLETADO ===")
    }
}
